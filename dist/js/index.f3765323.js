(function(t){function e(e){for(var c,i,r=e[0],l=e[1],s=e[2],b=0,d=[];b<r.length;b++)i=r[b],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(t[c]=l[c]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(c=!1)}c&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var c={},o={index:0},a=[];function i(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=c,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)i.d(n,c,function(e){return t[e]}.bind(null,c));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var s=0;s<r.length;s++)e(r[s]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2820:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),o={id:"nav"},a=Object(c["f"])("Home"),i=Object(c["f"])(" | "),r=Object(c["f"])("About");function l(t,e){var n=Object(c["w"])("router-link"),l=Object(c["w"])("router-view");return Object(c["p"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("div",o,[Object(c["g"])(n,{to:"/"},{default:Object(c["E"])((function(){return[a]})),_:1}),i,Object(c["g"])(n,{to:"/about"},{default:Object(c["E"])((function(){return[r]})),_:1})]),Object(c["g"])(l)],64)}const s={};s.render=l;var u=s,b=n("9483");Object(b["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var d=n("6c02"),p=(n("b0c0"),Object(c["G"])("data-v-0b83487b"));Object(c["s"])("data-v-0b83487b");var f={class:"home"},O=Object(c["g"])("option",{value:"pin"},"PIN",-1),j=Object(c["g"])("option",{value:"state"},"State",-1),g={key:0},h={key:1},v=Object(c["g"])("label",{for:"pin"},"PIN Code: ",-1),y={key:0},m={border:"1"},k=Object(c["g"])("br",null,null,-1),S={key:0,style:{"text-transform":"uppercase",color:"white",background:"#ad0000"}},_={style:{border:"1px solid black","border-collapse":"collapse"}},D=Object(c["f"])("D1 "),I=Object(c["g"])("br",null,null,-1),V=Object(c["f"])("D2 "),w=Object(c["g"])("br",null,null,-1),C=Object(c["g"])("br",null,null,-1),x=Object(c["g"])("br",null,null,-1),P=Object(c["g"])("hr",null,null,-1),T={key:1},W={border:"1"},B=Object(c["g"])("br",null,null,-1),A={key:0,style:{"text-transform":"uppercase",color:"white",background:"#ad0000"}},F={style:{border:"1px solid black","border-collapse":"collapse"}},M=Object(c["f"])("D1 "),N=Object(c["g"])("br",null,null,-1),R=Object(c["f"])("D2 "),E=Object(c["g"])("br",null,null,-1),U={key:2},G={key:0};Object(c["q"])();var H=p((function(t,e,n,o,a,i){return Object(c["p"])(),Object(c["d"])("div",f,[Object(c["g"])("div",null,[Object(c["F"])(Object(c["g"])("select",{name:"",id:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.optionType=t}),onChange:e[2]||(e[2]=function(){return i.changeOption&&i.changeOption.apply(i,arguments)})},[O,j],544),[[c["A"],a.optionType]])]),Object(c["F"])(Object(c["g"])("input",{type:"date",id:"date",name:"date","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.date=t}),onChange:e[4]||(e[4]=function(){return i.formatDate&&i.formatDate.apply(i,arguments)})},null,544),[[c["B"],a.date]]),Object(c["F"])(Object(c["g"])("div",null,[a.errorVal?(Object(c["p"])(),Object(c["d"])("div",h,Object(c["y"])(a.errorVal),1)):(Object(c["p"])(),Object(c["d"])("div",g,[Object(c["F"])(Object(c["g"])("select",{onChange:e[5]||(e[5]=function(){return i.changeState&&i.changeState.apply(i,arguments)}),"onUpdate:modelValue":e[6]||(e[6]=function(t){return a.selectedState=t})},[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(a.states,(function(t){return Object(c["p"])(),Object(c["d"])("option",{key:t,value:t.state_id},Object(c["y"])(t.state_name),9,["value"])})),128))],544),[[c["A"],a.selectedState]]),Object(c["F"])(Object(c["g"])("select",{onChange:e[7]||(e[7]=function(){return i.changeDistrict&&i.changeDistrict.apply(i,arguments)}),"onUpdate:modelValue":e[8]||(e[8]=function(t){return a.selectedDistrict=t}),ref:"district"},[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(a.districts,(function(t){return Object(c["p"])(),Object(c["d"])("option",{key:t,value:t.district_id},Object(c["y"])(t.district_name),9,["value"])})),128))],544),[[c["A"],a.selectedDistrict]])]))],512),[[c["C"],"state"===a.optionType]]),Object(c["F"])(Object(c["g"])("div",null,[v,Object(c["F"])(Object(c["g"])("input",{type:"text",name:"pin","onUpdate:modelValue":e[9]||(e[9]=function(t){return a.pinCode=t})},null,512),[[c["B"],a.pinCode]])],512),[[c["C"],"pin"===a.optionType]]),Object(c["g"])("input",{type:"button",class:"button is-primary",value:"Get data",ref:"getButton",onClick:e[10]||(e[10]=function(){return i.getVaccinationInfoWeek&&i.getVaccinationInfoWeek.apply(i,arguments)})},null,512),Object(c["g"])("button",{type:"submit",class:"button is-info",value:"Poll",ref:"pollButton",onClick:e[11]||(e[11]=function(){return i.startTimer&&i.startTimer.apply(i,arguments)})},Object(c["y"])(a.pollButtonText),513),a.processedVaccInfoWeek?(Object(c["p"])(),Object(c["d"])("div",y,[Object(c["f"])(Object(c["y"])(a.processedVaccInfoWeek)+" ",1),Object(c["g"])("table",m,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(a.processedVaccInfoWeek,(function(t){return Object(c["p"])(),Object(c["d"])("tr",{key:t},[Object(c["g"])("td",null,[Object(c["g"])("h5",null,Object(c["y"])(t.name),1)]),Object(c["g"])("td",null,[Object(c["f"])(" Block: "+Object(c["y"])(t.block_name)+" ",1),k,Object(c["f"])(" "+Object(c["y"])(t.address)+", "+Object(c["y"])(t.pincode)+" ",1),"Paid"===t.fee_type?(Object(c["p"])(),Object(c["d"])("span",S,Object(c["y"])(t.fee_type),1)):Object(c["e"])("",!0)]),(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.sessions,(function(t){return Object(c["p"])(),Object(c["d"])("td",{key:t},[Object(c["g"])("div",null,[Object(c["g"])("strong",null,Object(c["y"])(t.date),1)]),Object(c["g"])("div",null,Object(c["y"])(t.vaccine),1),Object(c["g"])("div",null,[Object(c["g"])("small",null,"Age: "+Object(c["y"])(t.min_age_limit)+"+",1),Object(c["g"])("table",_,[Object(c["g"])("tr",null,[Object(c["g"])("td",null,[D,I,Object(c["f"])(Object(c["y"])(t.available_capacity_dose1),1)]),Object(c["g"])("td",{style:{backgroundColor:i.isAvailable(t.available_capacity)}},Object(c["y"])(t.available_capacity),5),Object(c["g"])("td",null,[V,w,Object(c["f"])(Object(c["y"])(t.available_capacity_dose2),1)])])])])])})),128))])})),128))])])):Object(c["e"])("",!0),C,x,P,a.vaccInfoWeek?(Object(c["p"])(),Object(c["d"])("div",T,[Object(c["g"])("table",W,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(a.vaccInfoWeek,(function(t){return Object(c["p"])(),Object(c["d"])("tr",{key:t},[Object(c["g"])("td",null,[Object(c["g"])("h5",null,Object(c["y"])(t.name),1)]),Object(c["g"])("td",null,[Object(c["f"])(" Block: "+Object(c["y"])(t.block_name)+" ",1),B,Object(c["f"])(" "+Object(c["y"])(t.address)+", "+Object(c["y"])(t.pincode)+" ",1),"Paid"===t.fee_type?(Object(c["p"])(),Object(c["d"])("span",A,Object(c["y"])(t.fee_type),1)):Object(c["e"])("",!0)]),(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.sessions,(function(t){return Object(c["p"])(),Object(c["d"])("td",{key:t},[Object(c["g"])("div",null,[Object(c["g"])("strong",null,Object(c["y"])(t.date),1)]),Object(c["g"])("div",null,Object(c["y"])(t.vaccine),1),Object(c["g"])("div",null,[Object(c["g"])("small",null,"Age: "+Object(c["y"])(t.min_age_limit)+"+",1),Object(c["g"])("table",F,[Object(c["g"])("tr",null,[Object(c["g"])("td",null,[M,N,Object(c["f"])(Object(c["y"])(t.available_capacity_dose1),1)]),Object(c["g"])("td",{style:{backgroundColor:i.isAvailable(t.available_capacity)}},Object(c["y"])(t.available_capacity),5),Object(c["g"])("td",null,[R,E,Object(c["f"])(Object(c["y"])(t.available_capacity_dose2),1)])])])])])})),128))])})),128))])])):(Object(c["p"])(),Object(c["d"])("span",U,[a.selectedDistrict?(Object(c["p"])(),Object(c["d"])("span",G,"Getting info of "+Object(c["y"])(a.selectedDistrict),1)):Object(c["e"])("",!0)]))])})),J=n("1da1"),q=(n("96cf"),n("99af"),n("4d90"),n("4de4"),n("159b"),n("bc3a")),K=n.n(q),Y={name:"Home",components:{},data:function(){return{optionType:"state",date:null,formattedDate:null,datePickerDate:null,pinCode:null,states:null,districts:null,errorVal:null,selectedState:null,selectedDistrict:null,vaccInfoWeek:null,vaccinationInfo:null,processedVaccInfo:null,processedVaccInfoWeek:null,initialCountVal:5,count:this.initialCountVal,timer:null,isPolling:!1,pollButtonText:"Poll"}},mounted:function(){this.$nextTick((function(){var t=new Date;this.date="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,0),"-").concat(t.getDate()),this.getStates(),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.option&&(this.optionType=localStorage.option)}))},methods:{populateStoredValues:function(){localStorage.state&&(this.selectedState=localStorage.state,this.changeState()),localStorage.district&&(this.selectedDistrict=localStorage.district,this.changeDistrict()),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.option&&(this.optionType=localStorage.option)},changeOption:function(){this.optionType&&localStorage.setItem("option",this.optionType),this.populateStoredValues()},startTimer:function(){var t=this;console.log("Poll button clicked"),"Poll"===this.pollButtonText?(console.log("Timer started",this.count),this.timer=setInterval((function(){return t.countdown()}),1e3),this.isPolling=!0,this.pollButtonText="Polling... Click to stop"):(clearInterval(this.timer),this.timer=null,this.pollButtonText="Poll",this.isPolling=!1)},countdown:function(){this.count>0?this.count--:(this.count=this.initialCountVal,this.getVaccinationInfoWeek())},isAvailable:function(t){return t>0?"lightgreen":"lightpink"},feeType:function(t){return"Paid"===t?"lightpink":"lightgreen"},formatDate:function(){var t=new Date(this.date);this.formattedDate="".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear())},changeState:function(){localStorage.setItem("state",this.selectedState),this.getDistrict()},getDistrict:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.district.focus(),n=t,e.next=4,K.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(t.selectedState)).then((function(t){n.districts=t.data.districts})).catch((function(t){n.errorVal=t.response}));case 4:localStorage.district&&(t.selectedDistrict=localStorage.district,t.changeDistrict());case 5:case"end":return e.stop()}}),e)})))()},changeDistrict:function(){localStorage.setItem("district",this.selectedDistrict),this.getVaccinationInfoWeek()},getStates:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,e.next=3,K.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(t){n.states=t.data.states,localStorage.setItem("states",JSON.stringify(n.states))})).catch((function(t){n.errorVal=t.response.data.error,console.log(n.errorVal)}));case 3:localStorage.state&&(t.selectedState=localStorage.state,t.changeState());case 4:case"end":return e.stop()}}),e)})))()},getVaccinationInfoWeek:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pinCode&&localStorage.setItem("pin",t.pinCode),t.formatDate(),n=t,c=null,c="state"===t.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(t.selectedDistrict,"&date=").concat(t.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(t.pinCode,"&date=").concat(t.formattedDate),e.next=7,K.a.get(c).then((function(t){"data"in t?(console.log(t.data),n.vaccInfoWeek=t.data.centers):(console.error(t),n.errorVal=t)})).catch((function(t){console.log(t),"response"in t&&"data"in t.response&&(n.errorVal=t.response.data.error,console.log(n.errorVal))}));case 7:case"end":return e.stop()}}),e)})))()},getVaccinationInfo:function(){this.vaccinationInfo=null;var t=this,e=null;e="state"===this.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=".concat(this.selectedDistrict,"&date=").concat(this.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode=".concat(this.pinCode,"&date=").concat(this.formattedDate),console.log(e),K.a.get(e).then((function(e){"data"in e?(console.log(e.data),t.vaccinationInfo=e.data.sessions,t.processVaccinationInfo()):(console.error(e),t.errorVal=e)})).catch((function(e){console.log(e),"response"in e&&"data"in e.response&&(t.errorVal=e.response.data.error,console.log(t.errorVal))}))},processVaccinationInfo:function(){this.vaccinationInfo&&(this.processedInfo=this.vaccinationInfo.filter((function(t){return t.available_capacity>0})))},processVaccinationInfoWeek:function(){if(this.vaccInfoWeek){var t={};this.vaccInfoWeek.forEach((function(e){e.sessions.forEach((function(n){n.available_capacity>0&&(t[e.center_id]=n)}))})),console.log(t),this.processedVaccInfoWeek=t}}}};n("62db");Y.render=H,Y.__scopeId="data-v-0b83487b";var $=Y,z={class:"about"},L=Object(c["g"])("h1",null,"CoWin Fetch",-1),Q=Object(c["g"])("h2",null," App to fetch information from CoWin site regarding vaccination availability",-1),X=Object(c["f"])(" Developed by "),Z=Object(c["g"])("a",{href:"mailto:kishan.karun@gmail.com"},"Kishan K",-1);function tt(t,e){return Object(c["p"])(),Object(c["d"])("div",z,[L,Q,X,Z])}const et={};et.render=tt;var nt=et,ct=[{path:"/",name:"Home",component:$},{path:"/about",name:"About",component:nt}],ot=Object(d["a"])({history:Object(d["b"])(),routes:ct}),at=ot,it=n("5502"),rt=Object(it["a"])({state:{},mutations:{},actions:{},modules:{}});Object(c["c"])(u).use(rt).use(at).mount("#app")},"62db":function(t,e,n){"use strict";n("2820")}});
//# sourceMappingURL=index.f3765323.js.map