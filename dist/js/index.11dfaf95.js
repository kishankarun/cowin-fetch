(function(t){function e(e){for(var c,o,l=e[0],s=e[1],r=e[2],d=0,b=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c]);u&&u(e);while(b.length)b.shift()();return i.push.apply(i,r||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],c=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(c=!1)}c&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},a={index:0},i=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var r=0;r<l.length;r++)e(l[r]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),a={class:"breadcrumb"},i=Object(c["g"])("Home"),o=Object(c["g"])("About"),l=Object(c["h"])("div",{class:"is-size-3 has-text-weight-bold"},"CoWin Fetch",-1),s={class:"is-size-7"},r=Object(c["g"])(" App to fetch information from CoWin site regarding vaccination availability. (Read details in the "),u=Object(c["g"])("About"),d=Object(c["g"])(" page) "),b=Object(c["h"])("p",{class:"is-size-7 is-italic has-text-danger"},"* Works in most browsesrs.",-1);function p(t,e){var n=Object(c["x"])("router-link"),p=Object(c["x"])("router-view");return Object(c["q"])(),Object(c["d"])(c["a"],null,[Object(c["h"])("nav",a,[Object(c["h"])("ul",null,[Object(c["h"])("li",null,[Object(c["h"])(n,{class:"navbar-item",to:"/"},{default:Object(c["F"])((function(){return[i]})),_:1})]),Object(c["h"])("li",null,[Object(c["h"])(n,{class:"navbar-item",to:"/about"},{default:Object(c["F"])((function(){return[o]})),_:1})])])]),l,Object(c["h"])("div",s,[r,Object(c["h"])(n,{to:"/about"},{default:Object(c["F"])((function(){return[u]})),_:1}),d]),b,Object(c["h"])(p)],64)}const h={};h.render=p;var f=h,O=n("9483");Object(O["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var g=n("6c02"),j=Object(c["H"])("data-v-3a78c652");Object(c["t"])("data-v-3a78c652");var v={class:"home"},m={class:"field is-grouped"},y={class:"control"},k={class:"label"},S=Object(c["g"])(" Search by: "),I={class:"select is-small"},D=Object(c["h"])("option",{value:""},"-- Select PIN or State --",-1),V=Object(c["h"])("option",{value:"pin"},"PIN",-1),w=Object(c["h"])("option",{value:"state"},"State",-1),_={class:"field is-grouped"},x={class:"control"},T={class:"label"},C=Object(c["g"])(" From date: "),q={class:"field is-grouped"},W={class:"control"},z={class:"label",for:"state"},P=Object(c["g"])(" State: "),N={class:"select is-small"},B={class:"field is-grouped"},G={class:"control"},A={class:"label",for:"district"},F=Object(c["g"])(" District: "),H={class:"select is-small"},M={class:"field is-grouped"},R={class:"control"},U={class:"label",for:"age"},J=Object(c["g"])(" PIN Code: "),K={key:0,class:"has-text-danger"},Y={class:"field is-grouped mt-3"},E={class:"control"},$={class:"label",for:"age"},L=Object(c["g"])(" Age limit: "),Q={class:"select is-small"},X=Object(c["h"])("option",{value:"18"},"18+",-1),Z=Object(c["h"])("option",{value:"40"},"40+",-1),tt=Object(c["h"])("option",{value:"45"},"45+",-1),et={class:"field is-grouped"},nt={class:"control"},ct={class:"control"},at={class:"has-text-weight-bold"},it={key:0,class:"is-uppercase has-text-danger"},ot={key:1},lt={key:0},st=Object(c["g"])(" and "),rt={key:1},ut={key:2},dt={key:0},bt={class:"is-size-5 has-text-weight-bold"},pt=Object(c["g"])("Available slots "),ht={key:0,class:"has-text-weight-bold has-text-danger"},ft={key:1},Ot={key:2},gt=Object(c["h"])("div",{class:"has-background-danger-light"},"- No slots available -",-1),jt=Object(c["h"])("br",null,null,-1),vt=Object(c["h"])("span",{class:"label"},"D1: Dose 1, D2: Dose 2",-1),mt=Object(c["h"])("hr",null,null,-1),yt={key:3},kt=Object(c["h"])("h1",{class:"is-size-5 has-text-weight-bold"},"All slots for all age groups",-1);Object(c["r"])();var St=j((function(t,e,n,a,i,o){var l=Object(c["x"])("InfoTable");return Object(c["q"])(),Object(c["d"])("div",v,[Object(c["h"])("div",m,[Object(c["h"])("p",y,[Object(c["h"])("label",k,[S,Object(c["h"])("div",I,[Object(c["G"])(Object(c["h"])("select",{name:"option",id:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.optionType=t}),onChange:e[2]||(e[2]=function(){return o.changeOption&&o.changeOption.apply(o,arguments)})},[D,V,w],544),[[c["B"],i.optionType]])])])])]),Object(c["h"])("div",_,[Object(c["h"])("p",x,[Object(c["h"])("label",T,[C,Object(c["G"])(Object(c["h"])("input",{type:"date",id:"date",name:"date","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.date=t}),onChange:e[4]||(e[4]=function(){return o.formatDate&&o.formatDate.apply(o,arguments)})},null,544),[[c["C"],i.date]])])])]),Object(c["G"])(Object(c["h"])("div",null,[Object(c["h"])("div",q,[Object(c["h"])("p",W,[Object(c["h"])("label",z,[P,Object(c["h"])("div",N,[Object(c["G"])(Object(c["h"])("select",{id:"state",name:"state",onChange:e[5]||(e[5]=function(){return o.changeState&&o.changeState.apply(o,arguments)}),"onUpdate:modelValue":e[6]||(e[6]=function(t){return i.selectedState=t})},[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(i.states,(function(t){return Object(c["q"])(),Object(c["d"])("option",{key:t,value:t.state_id},Object(c["z"])(t.state_name),9,["value"])})),128))],544),[[c["B"],i.selectedState]])])])])]),Object(c["h"])("div",B,[Object(c["h"])("p",G,[Object(c["h"])("label",A,[F,Object(c["h"])("div",H,[Object(c["G"])(Object(c["h"])("select",{id:"district",name:"district",onChange:e[7]||(e[7]=function(){return o.changeDistrict&&o.changeDistrict.apply(o,arguments)}),"onUpdate:modelValue":e[8]||(e[8]=function(t){return i.selectedDistrict=t}),ref:"district"},[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(i.districts,(function(t){return Object(c["q"])(),Object(c["d"])("option",{key:t,value:t.district_id},Object(c["z"])(t.district_name),9,["value"])})),128))],544),[[c["B"],i.selectedDistrict]])])])])])],512),[[c["D"],!i.errorVal&&"state"===i.optionType]]),Object(c["G"])(Object(c["h"])("div",M,[Object(c["h"])("p",R,[Object(c["h"])("label",U,[J,Object(c["G"])(Object(c["h"])("input",{class:"is-small",type:"text",name:"pin","onUpdate:modelValue":e[9]||(e[9]=function(t){return i.pinCode=t})},null,512),[[c["C"],i.pinCode]])])])],512),[[c["D"],"pin"===i.optionType]]),i.errorVal?(Object(c["q"])(),Object(c["d"])("div",K,Object(c["z"])(i.errorVal),1)):Object(c["e"])("",!0),Object(c["h"])("div",Y,[Object(c["h"])("p",E,[Object(c["h"])("label",$,[L,Object(c["h"])("div",Q,[Object(c["G"])(Object(c["h"])("select",{name:"age",id:"age","onUpdate:modelValue":e[10]||(e[10]=function(t){return i.age=t}),onChange:e[11]||(e[11]=function(){return o.getVaccinationInfoWeek&&o.getVaccinationInfoWeek.apply(o,arguments)})},[X,Z,tt],544),[[c["B"],i.age]])])])])]),Object(c["h"])("div",et,[Object(c["h"])("div",nt,[Object(c["h"])("input",{type:"button",class:"button is-primary is-small is-rounded",value:"Get data",ref:"getButton",onClick:e[12]||(e[12]=function(){return o.getVaccinationInfoWeek&&o.getVaccinationInfoWeek.apply(o,arguments)})},null,512)]),Object(c["h"])("div",ct,[Object(c["h"])("button",{type:"submit",class:"button is-info is-small is-rounded",value:"Poll",ref:"pollButton",onClick:e[13]||(e[13]=function(){return o.startTimer&&o.startTimer.apply(o,arguments)})},Object(c["z"])(i.pollButtonText),513)])]),Object(c["h"])("div",at,[i.optionType?(Object(c["q"])(),Object(c["d"])("span",it,Object(c["z"])(i.optionType),1)):Object(c["e"])("",!0),"state"===i.optionType?(Object(c["q"])(),Object(c["d"])("span",ot,[i.selectedState?(Object(c["q"])(),Object(c["d"])("span",lt," : "+Object(c["z"])(o.getName("state")),1)):Object(c["e"])("",!0),st,i.selectedDistrict?(Object(c["q"])(),Object(c["d"])("span",rt,Object(c["z"])(o.getName("district")),1)):Object(c["e"])("",!0)])):(Object(c["q"])(),Object(c["d"])("span",ut,[i.pinCode?(Object(c["q"])(),Object(c["d"])("span",dt,": "+Object(c["z"])(i.pinCode),1)):Object(c["e"])("",!0)]))]),Object(c["h"])("h1",bt,[pt,i.age?(Object(c["q"])(),Object(c["d"])("span",ht,"for "+Object(c["z"])(i.age)+"+ age group",1)):Object(c["e"])("",!0)]),i.processedVaccInfoWeek&&i.processedVaccInfoWeek.length>0?(Object(c["q"])(),Object(c["d"])("div",ft,[Object(c["h"])(l,{vaccinationInfo:i.processedVaccInfoWeek},null,8,["vaccinationInfo"])])):(Object(c["q"])(),Object(c["d"])("div",Ot,[gt])),jt,vt,mt,i.vaccInfoWeek?(Object(c["q"])(),Object(c["d"])("div",yt,[kt,Object(c["h"])(l,{vaccinationInfo:i.vaccInfoWeek},null,8,["vaccinationInfo"])])):Object(c["e"])("",!0)])})),It=n("1da1"),Dt=(n("96cf"),n("99af"),n("4d90"),n("7db0"),n("d3b7"),n("25f0"),n("4de4"),n("bc3a")),Vt=n.n(Dt),wt=(n("b0c0"),Object(c["H"])("data-v-6d72ccde"));Object(c["t"])("data-v-6d72ccde");var _t={class:"table is-bordered is-striped"},xt={key:0,style:{"text-transform":"uppercase",color:"white",background:"#ad0000"}},Tt=Object(c["h"])("strong",null,"D1 ",-1),Ct=Object(c["g"])(),qt=Object(c["h"])("br",null,null,-1),Wt=Object(c["h"])("strong",null,"D2 ",-1),zt=Object(c["g"])(),Pt=Object(c["h"])("br",null,null,-1);Object(c["r"])();var Nt=wt((function(t,e,n,a,i,o){return Object(c["q"])(),Object(c["d"])("table",_t,[Object(c["h"])("tbody",null,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(n.vaccinationInfo,(function(t){return Object(c["q"])(),Object(c["d"])("tr",{key:t},[Object(c["h"])("td",null,[Object(c["h"])("div",null,[Object(c["h"])("strong",null,Object(c["z"])(t.name),1)]),Object(c["g"])(" "+Object(c["z"])(t.address)+", "+Object(c["z"])(t.pincode)+" ",1),"Paid"===t.fee_type?(Object(c["q"])(),Object(c["d"])("span",xt,Object(c["z"])(t.fee_type),1)):Object(c["e"])("",!0)]),(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["w"])(t.sessions,(function(t){return Object(c["q"])(),Object(c["d"])("td",{key:t},[Object(c["h"])("div",null,[Object(c["h"])("strong",null,Object(c["z"])(t.date),1)]),Object(c["h"])("div",null,Object(c["z"])(t.vaccine),1),Object(c["h"])("div",null,[Object(c["h"])("small",null,"Age: "+Object(c["z"])(t.min_age_limit)+"+",1),Object(c["h"])("table",null,[Object(c["h"])("tr",null,[Object(c["h"])("td",null,[Tt,Ct,qt,Object(c["g"])(Object(c["z"])(t.available_capacity_dose1),1)]),Object(c["h"])("td",{style:{backgroundColor:o.isAvailable(t.available_capacity)}},Object(c["z"])(t.available_capacity),5),Object(c["h"])("td",null,[Wt,zt,Pt,Object(c["g"])(Object(c["z"])(t.available_capacity_dose2),1)])])])])])})),128))])})),128))])])})),Bt={name:"InfoTable",props:{vaccinationInfo:Object},methods:{isAvailable:function(t){return t>0?"lightgreen":"lightpink"}}};n("5b7f");Bt.render=Nt,Bt.__scopeId="data-v-6d72ccde";var Gt=Bt,At={name:"Home",components:{InfoTable:Gt},data:function(){return{optionType:"",age:18,date:null,formattedDate:null,datePickerDate:null,pinCode:null,states:null,districts:null,errorVal:null,selectedState:null,selectedDistrict:null,vaccInfoWeek:null,vaccinationInfo:null,processedVaccInfo:null,processedVaccInfoWeek:null,initialCountVal:5,count:this.initialCountVal,timer:null,isPolling:!1,pollButtonText:"Get data automatically"}},mounted:function(){this.$nextTick((function(){var t=new Date;this.date="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,0),"-").concat(t.getDate()),this.getStates("mounted"),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.age&&(this.age=localStorage.age),localStorage.option&&(this.optionType=localStorage.option)}))},methods:{notifyMe:function(){"Notification"in window?"granted"===Notification.permission?new Notification("Hi there!"):"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){"granted"===t&&new Notification("Hi there!")})):alert("This browser does not support desktop notification")},resetValues:function(){this.districts=null,this.selectedDistrict=null,this.processedVaccInfoWeek=null,this.vaccInfoWeek=null},populateStoredValues:function(){"state"===this.optionType&&(localStorage.state&&(this.selectedState=localStorage.state,this.changeState()),localStorage.district&&(this.selectedDistrict=localStorage.district,this.changeDistrict())),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.option&&(this.optionType=localStorage.option)},changeOption:function(){this.errorVal=null,this.optionType&&localStorage.setItem("option",this.optionType),this.populateStoredValues()},startTimer:function(){var t=this;console.log("Poll button clicked"),"Get data automatically"===this.pollButtonText?(console.log("Timer started"),this.timer=setInterval((function(){return t.countdown()}),1e3),this.isPolling=!0,this.pollButtonText="Getting data... Click to stop"):(clearInterval(this.timer),this.timer=null,this.pollButtonText="Get data automatically",this.isPolling=!1)},countdown:function(){this.count>0?(this.count--,this.pollButtonText="Getting data in ".concat(this.count,"... Click to stop")):(this.count=this.initialCountVal,this.getVaccinationInfoWeek())},feeType:function(t){return"Paid"===t?"lightpink":"lightgreen"},formatDate:function(){var t=new Date(this.date);this.formattedDate="".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear())},getName:function(t){var e,n,c="".concat(t,"_id"),a="".concat(t,"_name");"state"===t?(e=this.states,n=this.selectedState):(e=this.districts,n=this.selectedDistrict);try{return e.find((function(t){return t[c].toString()===n.toString()}))[a]}catch(i){return null}},changeState:function(t){this.resetValues(),localStorage.setItem("state",this.selectedState),this.getDistricts(t)},getDistricts:function(t){var e=this;return Object(It["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e,n.next=3,Vt.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(e.selectedState)).then((function(t){c.districts=t.data.districts})).catch((function(t){c.errorVal=t.response}));case 3:localStorage.setItem("districts",JSON.stringify(c.districts)),localStorage.district&&(e.selectedDistrict=localStorage.district,e.changeDistrict(t));case 5:case"end":return n.stop()}}),n)})))()},changeDistrict:function(t){t&&("mounted"===t||"mounted"!==t&&"change"===t.type&&"district"===t.target.id)&&(localStorage.setItem("district",this.selectedDistrict),this.getVaccinationInfoWeek())},getStates:function(t){var e=this;return Object(It["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e,n.next=3,Vt.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(t){c.states=t.data.states,localStorage.setItem("states",JSON.stringify(c.states))})).catch((function(t){c.errorVal=t.response.data.error,console.log(c.errorVal)}));case 3:localStorage.state&&(e.selectedState=localStorage.state,e.changeState(t));case 4:case"end":return n.stop()}}),n)})))()},getVaccinationInfoWeek:function(){var t=this;return Object(It["a"])(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.errorVal=null,t.pinCode&&localStorage.setItem("pin",t.pinCode),t.age&&localStorage.setItem("age",t.age),t.formatDate(),n=t,c=null,c="state"===t.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(t.selectedDistrict,"&date=").concat(t.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(t.pinCode,"&date=").concat(t.formattedDate),e.next=9,Vt.a.get(c).then((function(t){"data"in t?n.vaccInfoWeek=t.data.centers:(console.error(t),n.errorVal=t),n.processVaccinationInfoWeek()})).catch((function(t){console.log(t),"response"in t&&"data"in t.response&&(n.errorVal=t.response.data.error,console.log(n.errorVal))}));case 9:case"end":return e.stop()}}),e)})))()},getVaccinationInfo:function(){this.errorVal=null,this.vaccinationInfo=null;var t=this,e=null;e="state"===this.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=".concat(this.selectedDistrict,"&date=").concat(this.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode=".concat(this.pinCode,"&date=").concat(this.formattedDate),Vt.a.get(e).then((function(e){"data"in e?(t.vaccinationInfo=e.data.sessions,t.processVaccinationInfo()):(console.error(e),t.errorVal=e)})).catch((function(e){console.log(e),"response"in e&&"data"in e.response&&(t.errorVal=e.response.data.error,console.log(t.errorVal))}))},processVaccinationInfo:function(){this.vaccinationInfo&&(this.processedInfo=this.vaccinationInfo.filter((function(t){return t.available_capacity>0})))},processVaccinationInfoWeek:function(){var t=this;this.vaccInfoWeek&&(this.processedVaccInfoWeek=this.vaccInfoWeek.filter((function(e){var n=e.sessions.filter((function(e){return e.available_capacity>0&&e.min_age_limit.toString()===t.age.toString()}));return n.length>0})))}}};n("c554");At.render=St,At.__scopeId="data-v-3a78c652";var Ft=At,Ht=Object(c["f"])('<div class="about"> Developed by <a href="mailto:kishan.karun@gmail.com">Kishan K</a></div><div class="content"><ul><li>Displays the result of vaccine availability for the selections made:</li><li>Options to search by PIN or State-District</li><li>Option to select from date</li><li>Option to select age filter</li></ul> Select the option - <strong>Search By</strong> and choose <ul><li><strong>PIN</strong> - enter required PIN code of the area to search</li><li><strong>State</strong></li><ul><li>Select the state and then select the district</li><li>The availability data is automatically displayed</li></ul><li>Click <strong>Get Data</strong> button to get the data</li></ul><ul><li>Click <strong>Get Data Automatically</strong> button to get the latest data every 5 seconds automatically</li></ul></div>',2);function Mt(t,e){return Object(c["q"])(),Object(c["d"])("div",null,[Ht])}const Rt={};Rt.render=Mt;var Ut=Rt,Jt=[{path:"/",name:"Home",component:Ft},{path:"/about",name:"About",component:Ut}],Kt=Object(g["a"])({history:Object(g["b"])(),routes:Jt}),Yt=Kt,Et=n("5502"),$t=Object(Et["a"])({state:{},mutations:{},actions:{},modules:{}});Object(c["c"])(f).use($t).use(Yt).mount("#app")},"5b7f":function(t,e,n){"use strict";n("c4c3")},9191:function(t,e,n){},c4c3:function(t,e,n){},c554:function(t,e,n){"use strict";n("9191")}});
//# sourceMappingURL=index.11dfaf95.js.map