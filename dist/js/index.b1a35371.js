(function(t){function e(e){for(var c,i,l=e[0],r=e[1],s=e[2],b=0,d=[];b<l.length;b++)i=l[b],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],c=!0,l=1;l<n.length;l++){var r=n[l];0!==a[r]&&(c=!1)}c&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var c={},a={index:0},o=[];function i(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=c,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)i.d(n,c,function(e){return t[e]}.bind(null,c));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var u=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),a={class:"breadcrumb"},o=Object(c["f"])("Home"),i=Object(c["f"])("About"),l=Object(c["g"])("h1",{class:"is-size-1"},"CoWin Fetch",-1),r=Object(c["g"])("h5",null," App to fetch information from CoWin site regarding vaccination availability",-1);function s(t,e){var n=Object(c["w"])("router-link"),s=Object(c["w"])("router-view");return Object(c["p"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("nav",a,[Object(c["g"])("ul",null,[Object(c["g"])("li",null,[Object(c["g"])(n,{class:"navbar-item",to:"/"},{default:Object(c["E"])((function(){return[o]})),_:1})]),Object(c["g"])("li",null,[Object(c["g"])(n,{class:"navbar-item",to:"/about"},{default:Object(c["E"])((function(){return[i]})),_:1})])])]),l,r,Object(c["g"])(s)],64)}const u={};u.render=s;var b=u,d=n("9483");Object(d["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var p=n("6c02"),g=(n("b0c0"),Object(c["G"])("data-v-739b4965"));Object(c["s"])("data-v-739b4965");var O={class:"home"},j=Object(c["g"])("p",{class:"is-italic has-text-danger"},"* Works only in Desktop browsers and Android chrome browser.",-1),f={class:"field is-grouped"},h={class:"control"},v={class:"label"},y=Object(c["f"])(" Search by: "),m={class:"select is-small"},k=Object(c["g"])("option",{value:""},"-- Select PIN or State --",-1),S=Object(c["g"])("option",{value:"pin"},"PIN",-1),V=Object(c["g"])("option",{value:"state"},"State",-1),w={class:"field is-grouped"},D={class:"control"},I={class:"label"},_=Object(c["f"])(" From date: "),x={class:"field is-grouped"},C={class:"control"},T={class:"label",for:"state"},W=Object(c["f"])(" State: "),P={class:"select is-small"},A={class:"control"},N={class:"label",for:"district"},B=Object(c["f"])(" District: "),F={class:"select is-small"},G={class:"field is-grouped"},M={class:"control"},R={class:"label",for:"age"},U=Object(c["f"])(" PIN Code: "),H={key:0,class:"has-text-danger"},J={class:"field is-grouped"},q={class:"control"},E={class:"label",for:"age"},K=Object(c["f"])(" Age limit: "),Y={class:"select is-small"},z=Object(c["g"])("option",{value:"18"},"18+",-1),$=Object(c["g"])("option",{value:"40"},"40+",-1),L=Object(c["g"])("option",{value:"45"},"45+",-1),Q={class:"field is-grouped"},X={class:"control"},Z={class:"control"},tt={class:"subtitle"},et={key:0,class:"is-uppercase has-text-danger"},nt={key:1},ct={key:0},at={key:1},ot={key:2},it={key:0},lt={class:"title"},rt=Object(c["f"])("Available slots "),st={key:0,class:"has-text-weight-bold has-text-danger"},ut={key:1},bt={style:{width:"100%",display:"block","max-height":"300px","overflow-y":"scroll"}},dt=Object(c["g"])("strong",null,"Block:",-1),pt=Object(c["g"])("br",null,null,-1),gt={key:0,style:{"text-transform":"uppercase",color:"white",background:"#ad0000"}},Ot={border:"1"},jt=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",null,"D1"),Object(c["g"])("th",null,"Total"),Object(c["g"])("th",null,"D2")])],-1),ft={key:2},ht=Object(c["g"])("h2",{class:"subtitle"},"No slots available",-1),vt=Object(c["g"])("br",null,null,-1),yt=Object(c["g"])("span",{class:"label"},"D1: Dose 1, D2: Dose 2",-1),mt=Object(c["g"])("hr",null,null,-1),kt={key:3},St=Object(c["g"])("h1",{class:"title"},"All slots for all age groups",-1),Vt={style:{width:"100%",display:"block","max-height":"300px","overflow-y":"scroll"}},wt=Object(c["g"])("strong",null,"Block:",-1),Dt=Object(c["g"])("br",null,null,-1),It={key:0,style:{"text-transform":"uppercase",color:"white",background:"#ad0000"}},_t=Object(c["g"])("strong",null,"D1",-1),xt=Object(c["f"])(),Ct=Object(c["g"])("br",null,null,-1),Tt=Object(c["f"])("D2 "),Wt=Object(c["g"])("br",null,null,-1);Object(c["q"])();var Pt=g((function(t,e,n,a,o,i){return Object(c["p"])(),Object(c["d"])("div",O,[j,Object(c["g"])("div",f,[Object(c["g"])("p",h,[Object(c["g"])("label",v,[y,Object(c["g"])("div",m,[Object(c["F"])(Object(c["g"])("select",{name:"option",id:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return o.optionType=t}),onChange:e[2]||(e[2]=function(){return i.changeOption&&i.changeOption.apply(i,arguments)})},[k,S,V],544),[[c["A"],o.optionType]])])])])]),Object(c["g"])("div",w,[Object(c["g"])("p",D,[Object(c["g"])("label",I,[_,Object(c["F"])(Object(c["g"])("input",{type:"date",id:"date",name:"date","onUpdate:modelValue":e[3]||(e[3]=function(t){return o.date=t}),onChange:e[4]||(e[4]=function(){return i.formatDate&&i.formatDate.apply(i,arguments)})},null,544),[[c["B"],o.date]])])])]),Object(c["F"])(Object(c["g"])("div",x,[Object(c["g"])("p",C,[Object(c["g"])("label",T,[W,Object(c["g"])("div",P,[Object(c["F"])(Object(c["g"])("select",{id:"state",name:"state",onChange:e[5]||(e[5]=function(){return i.changeState&&i.changeState.apply(i,arguments)}),"onUpdate:modelValue":e[6]||(e[6]=function(t){return o.selectedState=t})},[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(o.states,(function(t){return Object(c["p"])(),Object(c["d"])("option",{key:t,value:t.state_id},Object(c["y"])(t.state_name),9,["value"])})),128))],544),[[c["A"],o.selectedState]])])])]),Object(c["g"])("p",A,[Object(c["g"])("label",N,[B,Object(c["g"])("div",F,[Object(c["F"])(Object(c["g"])("select",{id:"district",name:"district",onChange:e[7]||(e[7]=function(){return i.changeDistrict&&i.changeDistrict.apply(i,arguments)}),"onUpdate:modelValue":e[8]||(e[8]=function(t){return o.selectedDistrict=t}),ref:"district"},[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(o.districts,(function(t){return Object(c["p"])(),Object(c["d"])("option",{key:t,value:t.district_id},Object(c["y"])(t.district_name),9,["value"])})),128))],544),[[c["A"],o.selectedDistrict]])])])])],512),[[c["C"],!o.errorVal&&"state"===o.optionType]]),Object(c["F"])(Object(c["g"])("div",G,[Object(c["g"])("p",M,[Object(c["g"])("label",R,[U,Object(c["F"])(Object(c["g"])("input",{class:"is-small",type:"text",name:"pin","onUpdate:modelValue":e[9]||(e[9]=function(t){return o.pinCode=t})},null,512),[[c["B"],o.pinCode]])])])],512),[[c["C"],"pin"===o.optionType]]),o.errorVal?(Object(c["p"])(),Object(c["d"])("div",H,Object(c["y"])(o.errorVal),1)):Object(c["e"])("",!0),Object(c["g"])("div",J,[Object(c["g"])("p",q,[Object(c["g"])("label",E,[K,Object(c["g"])("div",Y,[Object(c["F"])(Object(c["g"])("select",{name:"age",id:"age","onUpdate:modelValue":e[10]||(e[10]=function(t){return o.age=t}),onChange:e[11]||(e[11]=function(){return i.getVaccinationInfoWeek&&i.getVaccinationInfoWeek.apply(i,arguments)})},[z,$,L],544),[[c["A"],o.age]])])])])]),Object(c["g"])("div",Q,[Object(c["g"])("div",X,[Object(c["g"])("input",{type:"button",class:"button is-primary",value:"Get data",ref:"getButton",onClick:e[12]||(e[12]=function(){return i.getVaccinationInfoWeek&&i.getVaccinationInfoWeek.apply(i,arguments)})},null,512)]),Object(c["g"])("div",Z,[Object(c["g"])("button",{type:"submit",class:"button is-info",value:"Poll",ref:"pollButton",onClick:e[13]||(e[13]=function(){return i.startTimer&&i.startTimer.apply(i,arguments)})},Object(c["y"])(o.pollButtonText),513)])]),Object(c["g"])("h1",tt,[o.optionType?(Object(c["p"])(),Object(c["d"])("span",et,Object(c["y"])(o.optionType),1)):Object(c["e"])("",!0),"state"===o.optionType?(Object(c["p"])(),Object(c["d"])("span",nt,[o.selectedState?(Object(c["p"])(),Object(c["d"])("span",ct," : "+Object(c["y"])(i.getName("state")),1)):Object(c["e"])("",!0),o.selectedDistrict?(Object(c["p"])(),Object(c["d"])("span",at," and "+Object(c["y"])(i.getName("district")),1)):Object(c["e"])("",!0)])):(Object(c["p"])(),Object(c["d"])("span",ot,[o.pinCode?(Object(c["p"])(),Object(c["d"])("span",it,": "+Object(c["y"])(o.pinCode),1)):Object(c["e"])("",!0)]))]),Object(c["g"])("h1",lt,[rt,o.age?(Object(c["p"])(),Object(c["d"])("span",st,"for "+Object(c["y"])(o.age)+"+ age group",1)):Object(c["e"])("",!0)]),o.processedVaccInfoWeek&&o.processedVaccInfoWeek.length>0?(Object(c["p"])(),Object(c["d"])("div",ut,[Object(c["g"])("table",bt,[Object(c["g"])("tbody",null,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(o.processedVaccInfoWeek,(function(t){return Object(c["p"])(),Object(c["d"])("tr",{key:t},[Object(c["g"])("td",null,[Object(c["g"])("h5",null,Object(c["y"])(t.name),1),dt,Object(c["f"])(" "+Object(c["y"])(t.block_name)+" ",1),pt]),Object(c["g"])("td",null,[Object(c["f"])(Object(c["y"])(t.address)+", "+Object(c["y"])(t.pincode)+" ",1),"Paid"===t.fee_type?(Object(c["p"])(),Object(c["d"])("span",gt,Object(c["y"])(t.fee_type),1)):Object(c["e"])("",!0)]),(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.sessions,(function(t){return Object(c["p"])(),Object(c["d"])(c["a"],null,[t.available_capacity?(Object(c["p"])(),Object(c["d"])("td",{key:t},[Object(c["g"])("div",null,[Object(c["g"])("strong",null,Object(c["y"])(t.date),1)]),Object(c["g"])("div",null,Object(c["y"])(t.vaccine),1),Object(c["g"])("div",null,[Object(c["g"])("small",null,"Age: "+Object(c["y"])(t.min_age_limit)+"+",1),Object(c["g"])("table",Ot,[jt,Object(c["g"])("tr",null,[Object(c["g"])("td",null,Object(c["y"])(t.available_capacity_dose1),1),Object(c["g"])("td",{style:{backgroundColor:i.isAvailable(t.available_capacity)}},Object(c["y"])(t.available_capacity),5),Object(c["g"])("td",null,Object(c["y"])(t.available_capacity_dose2),1)])])])])):Object(c["e"])("",!0)],64)})),256))])})),128))])])])):(Object(c["p"])(),Object(c["d"])("div",ft,[ht])),vt,yt,mt,o.vaccInfoWeek?(Object(c["p"])(),Object(c["d"])("div",kt,[St,Object(c["g"])("table",Vt,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(o.vaccInfoWeek,(function(t){return Object(c["p"])(),Object(c["d"])("tr",{key:t},[Object(c["g"])("td",null,[Object(c["g"])("h5",null,Object(c["y"])(t.name),1)]),Object(c["g"])("td",null,[wt,Object(c["f"])(" "+Object(c["y"])(t.block_name)+" ",1),Dt,Object(c["f"])(" "+Object(c["y"])(t.address)+", "+Object(c["y"])(t.pincode)+" ",1),"Paid"===t.fee_type?(Object(c["p"])(),Object(c["d"])("span",It,Object(c["y"])(t.fee_type),1)):Object(c["e"])("",!0)]),(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.sessions,(function(t){return Object(c["p"])(),Object(c["d"])("td",{key:t},[Object(c["g"])("div",null,[Object(c["g"])("strong",null,Object(c["y"])(t.date),1)]),Object(c["g"])("div",null,Object(c["y"])(t.vaccine),1),Object(c["g"])("div",null,[Object(c["g"])("small",null,"Age: "+Object(c["y"])(t.min_age_limit)+"+",1),Object(c["g"])("table",null,[Object(c["g"])("tr",null,[Object(c["g"])("td",null,[_t,xt,Ct,Object(c["f"])(Object(c["y"])(t.available_capacity_dose1),1)]),Object(c["g"])("td",{style:{backgroundColor:i.isAvailable(t.available_capacity)}},Object(c["y"])(t.available_capacity),5),Object(c["g"])("td",null,[Tt,Wt,Object(c["f"])(Object(c["y"])(t.available_capacity_dose2),1)])])])])])})),128))])})),128))])])):Object(c["e"])("",!0)])})),At=n("1da1"),Nt=(n("96cf"),n("99af"),n("4d90"),n("7db0"),n("d3b7"),n("25f0"),n("4de4"),n("bc3a")),Bt=n.n(Nt),Ft={name:"Home",components:{},data:function(){return{optionType:"",age:18,date:null,formattedDate:null,datePickerDate:null,pinCode:null,states:null,districts:null,errorVal:null,selectedState:null,selectedDistrict:null,vaccInfoWeek:null,vaccinationInfo:null,processedVaccInfo:null,processedVaccInfoWeek:null,initialCountVal:5,count:this.initialCountVal,timer:null,isPolling:!1,pollButtonText:"Get data automatically"}},mounted:function(){this.$nextTick((function(){var t=new Date;this.date="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,0),"-").concat(t.getDate()),this.getStates("mounted"),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.age&&(this.age=localStorage.age),localStorage.option&&(this.optionType=localStorage.option)}))},methods:{notifyMe:function(){"Notification"in window?"granted"===Notification.permission?new Notification("Hi there!"):"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){"granted"===t&&new Notification("Hi there!")})):alert("This browser does not support desktop notification")},resetValues:function(){this.districts=null,this.selectedDistrict=null,this.processedVaccInfoWeek=null,this.vaccInfoWeek=null},populateStoredValues:function(){localStorage.state&&(this.selectedState=localStorage.state,this.changeState()),localStorage.district&&(this.selectedDistrict=localStorage.district,this.changeDistrict()),localStorage.pin&&(this.pinCode=localStorage.pin),localStorage.option&&(this.optionType=localStorage.option)},changeOption:function(){this.errorVal=null,this.optionType&&localStorage.setItem("option",this.optionType),this.populateStoredValues()},startTimer:function(){var t=this;console.log("Poll button clicked"),"Get data automatically"===this.pollButtonText?(console.log("Timer started"),this.timer=setInterval((function(){return t.countdown()}),1e3),this.isPolling=!0,this.pollButtonText="Getting data... Click to stop"):(clearInterval(this.timer),this.timer=null,this.pollButtonText="Get data automatically",this.isPolling=!1)},countdown:function(){this.count>0?(this.count--,this.pollButtonText="Getting data in ".concat(this.count,"... Click to stop")):(this.count=this.initialCountVal,this.getVaccinationInfoWeek())},isAvailable:function(t){return t>0?"lightgreen":"lightpink"},feeType:function(t){return"Paid"===t?"lightpink":"lightgreen"},formatDate:function(){var t=new Date(this.date);this.formattedDate="".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear())},getName:function(t){var e,n,c="".concat(t,"_id"),a="".concat(t,"_name");"state"===t?(e=this.states,n=this.selectedState):(e=this.districts,n=this.selectedDistrict);try{return e.find((function(t){return t[c].toString()===n.toString()}))[a]}catch(o){return null}},changeState:function(t){this.resetValues(),localStorage.setItem("state",this.selectedState),this.getDistricts(t)},getDistricts:function(t){var e=this;return Object(At["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e,n.next=3,Bt.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(e.selectedState)).then((function(t){c.districts=t.data.districts})).catch((function(t){c.errorVal=t.response}));case 3:localStorage.setItem("districts",JSON.stringify(c.districts)),localStorage.district&&(e.selectedDistrict=localStorage.district,e.changeDistrict(t));case 5:case"end":return n.stop()}}),n)})))()},changeDistrict:function(t){("mounted"===t||"change"===t.type&&"district"===t.target.id)&&(localStorage.setItem("district",this.selectedDistrict),this.getVaccinationInfoWeek())},getStates:function(t){var e=this;return Object(At["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e,n.next=3,Bt.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(t){c.states=t.data.states,localStorage.setItem("states",JSON.stringify(c.states))})).catch((function(t){c.errorVal=t.response.data.error,console.log(c.errorVal)}));case 3:localStorage.state&&(e.selectedState=localStorage.state,e.changeState(t));case 4:case"end":return n.stop()}}),n)})))()},getVaccinationInfoWeek:function(){var t=this;return Object(At["a"])(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.errorVal=null,t.pinCode&&localStorage.setItem("pin",t.pinCode),t.age&&localStorage.setItem("age",t.age),t.formatDate(),n=t,c=null,c="state"===t.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(t.selectedDistrict,"&date=").concat(t.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(t.pinCode,"&date=").concat(t.formattedDate),e.next=9,Bt.a.get(c).then((function(t){"data"in t?n.vaccInfoWeek=t.data.centers:(console.error(t),n.errorVal=t),n.processVaccinationInfoWeek()})).catch((function(t){console.log(t),"response"in t&&"data"in t.response&&(n.errorVal=t.response.data.error,console.log(n.errorVal))}));case 9:case"end":return e.stop()}}),e)})))()},getVaccinationInfo:function(){this.errorVal=null,this.vaccinationInfo=null;var t=this,e=null;e="state"===this.optionType?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=".concat(this.selectedDistrict,"&date=").concat(this.formattedDate):"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode=".concat(this.pinCode,"&date=").concat(this.formattedDate),Bt.a.get(e).then((function(e){"data"in e?(t.vaccinationInfo=e.data.sessions,t.processVaccinationInfo()):(console.error(e),t.errorVal=e)})).catch((function(e){console.log(e),"response"in e&&"data"in e.response&&(t.errorVal=e.response.data.error,console.log(t.errorVal))}))},processVaccinationInfo:function(){this.vaccinationInfo&&(this.processedInfo=this.vaccinationInfo.filter((function(t){return t.available_capacity>0})))},processVaccinationInfoWeek:function(){var t=this;this.vaccInfoWeek&&(this.processedVaccInfoWeek=this.vaccInfoWeek.filter((function(e){var n=e.sessions.filter((function(e){return e.available_capacity>0&&e.min_age_limit.toString()===t.age.toString()}));return n.length>0})))}}};n("88ea");Ft.render=Pt,Ft.__scopeId="data-v-739b4965";var Gt=Ft,Mt={class:"about"},Rt=Object(c["f"])(" Developed by "),Ut=Object(c["g"])("a",{href:"mailto:kishan.karun@gmail.com"},"Kishan K",-1);function Ht(t,e){return Object(c["p"])(),Object(c["d"])("div",Mt,[Rt,Ut])}const Jt={};Jt.render=Ht;var qt=Jt,Et=[{path:"/",name:"Home",component:Gt},{path:"/about",name:"About",component:qt}],Kt=Object(p["a"])({history:Object(p["b"])(),routes:Et}),Yt=Kt,zt=n("5502"),$t=Object(zt["a"])({state:{},mutations:{},actions:{},modules:{}});Object(c["c"])(b).use($t).use(Yt).mount("#app")},"68b4":function(t,e,n){},"88ea":function(t,e,n){"use strict";n("68b4")}});
//# sourceMappingURL=index.b1a35371.js.map